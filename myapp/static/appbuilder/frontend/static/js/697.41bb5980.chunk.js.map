{"version":3,"file":"static/js/697.41bb5980.chunk.js","mappings":"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KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,WAEnBN,EAAAA,EAAAA,KAAA,OAAKM,UAAU,MAAKF,UAChBJ,EAAAA,EAAAA,KAAA,OAAKM,UAAU,YAI/B,C,gHC1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","sources":["api/commonPipeline.ts","components/EchartCore/EchartCore.tsx","components/TableBox/TableBox.tsx","components/Loading/Loading.tsx","pages/CommonPipeline/D3Tool.ts","pages/CommonPipeline/TreePlusDiagram.tsx","pages/CommonPipeline/TreePlus.tsx","pages/CommonPipeline/CommonPipeline.tsx","pages/CommonPipeline/DWStandard.tsx","pages/CommonPipeline/NodeDetail.tsx"],"sourcesContent":["import { AxiosResponse } from 'axios'\nimport axios, { AxiosResFormat } from '.'\nimport { ILayoutConfig, INodeDetailItem, INodeItem } from '../pages/CommonPipeline/TreePlusInterface'\n\nexport const getNodeRelation = (pipelineId: string): AxiosResFormat<{\n    dag: INodeItem[]\n}> => {\n    return axios.get(`/workflow_modelview/api/web/dag/idc/pipeline/${pipelineId}`)\n}\n\nexport const getPipelineConfig = (pipelineId: string): AxiosResFormat<Array<Record<string, string>>> => {\n    return axios.get(`/workflow_modelview/api/web/layout/idc/pipeline/${pipelineId}`)\n}\n\nexport const getNodeInfo = (pipelineId: string, nodeId: string): AxiosResFormat<{ detail: INodeDetailItem[] }> => {\n    return axios.get(`/workflow_modelview/api/web/node_detail/idc/pipeline/${pipelineId}/${nodeId}`)\n}\n\nexport const getNodeRelationCommon = (url: string): AxiosResFormat<{\n    dag: INodeItem[]\n    layout: ILayoutConfig\n}> => {\n    return axios.get(url)\n}\n\nexport const getNodeInfoCommon = (url: string): AxiosResFormat<{ detail: INodeDetailItem[] }> => {\n    return axios.get(url)\n}\n\nexport const getNodeInfoApi = (url: string): AxiosResFormat<any> => {\n    return axios.get(url)\n}\n","import React, { useEffect, useState } from 'react'\nimport * as echarts from 'echarts';\n// import * as echarts from 'echarts/core';\n// import {\n//     BarChart,\n//     // 系列类型的定义后缀都为 SeriesOption\n//     BarSeriesOption,\n//     PieChart,\n//     PieSeriesOption,\n//     LineChart,\n//     LineSeriesOption,\n//     HeatmapChart,\n//     HeatmapSeriesOption\n// } from 'echarts/charts';\n// import {\n//     TitleComponent,\n//     // 组件类型的定义后缀都为 ComponentOption\n//     TitleComponentOption,\n//     TooltipComponent,\n//     TooltipComponentOption,\n//     GridComponent,\n//     GridComponentOption,\n//     // 数据集组件\n//     DatasetComponent,\n//     DatasetComponentOption,\n//     LegendComponent,\n//     // 内置数据转换器组件 (filter, sort)\n//     TransformComponent,\n//     CalendarComponentOption,\n//     CalendarComponent,\n//     VisualMapComponent,\n//     VisualMapComponentOption,\n//     ToolboxComponent\n// } from 'echarts/components';\nimport { LabelLayout, UniversalTransition } from 'echarts/features';\nimport { CanvasRenderer } from 'echarts/renderers';\nimport './EchartCore.less';\nimport { Spin } from 'antd';\nimport { FieldNumberOutlined } from '@ant-design/icons';\nimport { useTranslation } from 'react-i18next';\n\nexport type ECOption = echarts.EChartsOption\n// 通过 ComposeOption 来组合出一个只有必须组件和图表的 Option 类型\n// export type ECOption = echarts.ComposeOption<\n//     | BarSeriesOption\n//     | LineSeriesOption\n//     | TitleComponentOption\n//     | TooltipComponentOption\n//     | GridComponentOption\n//     | DatasetComponentOption\n//     | CalendarComponentOption\n//     | HeatmapSeriesOption\n//     | VisualMapComponentOption\n//     | PieSeriesOption\n// >;\n\n// // 注册必须的组件\n// echarts.use([\n//     LegendComponent,\n//     TitleComponent,\n//     TooltipComponent,\n//     GridComponent,\n//     DatasetComponent,\n//     TransformComponent,\n//     CalendarComponent,\n//     VisualMapComponent,\n//     ToolboxComponent,\n//     BarChart,\n//     LineChart,\n//     PieChart,\n//     LabelLayout,\n//     HeatmapChart,\n//     UniversalTransition,\n//     CanvasRenderer\n// ]);\n\ninterface IProps {\n    // option: ECOption\n    option: echarts.EChartsOption\n    loading?: boolean\n    title?: string\n    style?: React.CSSProperties\n    unit?: string\n    data?: {\n        xData: any[]\n        yData: any[]\n    }\n    isNoData?: boolean\n}\n\nconst defaultChartStyle: React.CSSProperties = {\n    height: 300\n}\n\n// https://echarts.apache.org/handbook/zh/how-to/data/dynamic-data\nexport default function EchartCore(props: IProps) {\n    const [chartInstance, setChartInstance] = useState<echarts.ECharts>()\n    const id = Math.random().toString(36).substring(2);\n    const { t, i18n } = useTranslation();\n\n    const option = {}\n\n    useEffect(() => {\n        const chartDom = document.getElementById(id)\n        if (chartDom) {\n            const chart = echarts.init(chartDom);\n            chart.setOption({ ...option, ...props.option })\n\n            if (!chartInstance) {\n                setChartInstance(chart)\n            }\n        }\n    }, [props.option, props.data])\n\n    return (\n        <Spin spinning={props.loading}>\n            <div className=\"chart-container\">\n                <div id={id} style={{ ...defaultChartStyle, ...props.style }}></div>\n                {\n                    props.isNoData ? <div className=\"chart-nodata\">\n                        <div>{t('暂无数据')}</div>\n                    </div> : null\n                }\n            </div>\n        </Spin>\n    )\n}\n","import React, { ReactNode, useEffect, useState } from 'react';\nimport { Row, Col, Space, Table, ConfigProvider, Button, Modal, Tabs, message, Checkbox } from 'antd';\nimport './TableBox.less';\nimport { TablePaginationConfig } from 'antd/lib/table/Table';\nimport emptyImg from '../../images/emptyBg.png';\nimport { GetRowKey, SorterResult, TableRowSelection } from 'antd/lib/table/interface';\n// import ExportJsonExcel from 'js-export-excel';\nimport { Resizable } from 'react-resizable';\nimport { useTranslation } from 'react-i18next';\n\nconst CopyToClipboard = require('react-copy-to-clipboard');\n\ninterface IProps {\n\tsize?: 'large' | 'middle' | 'small'\n\ttableKey?: string\n\trowKey?: string | GetRowKey<any>;\n\ttitleNode?: string | ReactNode;\n\tbuttonNode?: ReactNode;\n\tdataSource: any;\n\tcolumns: any;\n\tpagination?: false | TablePaginationConfig;\n\tscroll?:\n\t| ({\n\t\tx?: string | number | true | undefined;\n\t\ty?: string | number | undefined;\n\t} & {\n\t\tscrollToFirstRowOnChange?: boolean | undefined;\n\t})\n\t| undefined;\n\tloading?: boolean;\n\trowSelection?: TableRowSelection<any>;\n\tcancelExportData?: boolean;\n\tonChange?: (\n\t\tpagination: TablePaginationConfig,\n\t\tfilters: Record<string, (string | number | boolean)[] | null>,\n\t\tsorter: SorterResult<any> | SorterResult<any>[],\n\t) => void;\n}\n\nconst ResizableTitle = ({ onResize, width, ...restProps }: any) => {\n\tif (!width) {\n\t\treturn <th {...restProps} />;\n\t}\n\n\treturn (\n\t\t<Resizable\n\t\t\twidth={width}\n\t\t\theight={0}\n\t\t\thandle={\n\t\t\t\t<span\n\t\t\t\t\tclassName=\"react-resizable-handle\"\n\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t}\n\t\t\tonResize={onResize}\n\t\t\tdraggableOpts={{ enableUserSelectHack: false }}\n\t\t>\n\t\t\t<th {...restProps} style={{ ...restProps?.style, userSelect: 'none' }} />\n\t\t</Resizable>\n\t);\n};\n\nconst TableBox = (props: IProps) => {\n\tconst [exportDataVisible, setExportDataVisible] = useState(false);\n\tconst [dataFormat, setDataFormat] = useState<{ header: any[]; data: any[] }>({\n\t\theader: [],\n\t\tdata: [],\n\t});\n\tconst [filterValue, setFilterValue] = useState<any[]>([]);\n\n\t// 可伸缩列设置\n\tconst [cols, setCols] = useState(props.columns);\n\tconst handleResize = (index: any) => {\n\t\treturn (_: any, { size }: any) => {\n\t\t\tif (size.width < 100) return\n\t\t\tconst temp = [...cols];\n\t\t\ttemp[index] = { ...temp[index], width: size.width };\n\t\t\tconst tableWidth = temp.reduce((pre: any, next: any) => pre + next.width || 100, 0) + 200\n\t\t\tlocalStorage.setItem(props.tableKey || '', JSON.stringify(temp))\n\t\t\t// console.log(currentTableScroll, temp);\n\t\t\tsetCurrentTableScroll({ ...currentTableScroll, x: tableWidth })\n\t\t\tsetCols(temp);\n\t\t};\n\t};\n\tconst customColumns = cols.map((col: any, index: any) => {\n\t\treturn {\n\t\t\t...col,\n\t\t\twidth: col.width || 200,\n\t\t\tonHeaderCell: (column: any) => {\n\t\t\t\treturn {\n\t\t\t\t\twidth: column.width,\n\t\t\t\t\tonResize: handleResize(index),\n\t\t\t\t};\n\t\t\t},\n\t\t};\n\t});\n\tconst [currentTableScroll, setCurrentTableScroll] = useState(props.scroll)\n\tconst { t, i18n } = useTranslation();\n\n\tuseEffect(() => {\n\t\tsetCols(props.columns);\n\t}, [props.columns]);\n\n\tuseEffect(() => {\n\t\tsetCurrentTableScroll(props.scroll);\n\t}, [props.scroll]);\n\n\tuseEffect(() => {\n\t\tif (props.dataSource) {\n\t\t\tconst columns = props.columns.filter((item: any) => ~filterValue.indexOf(item.dataIndex));\n\t\t\thanddleFilterHeader(columns, props.dataSource);\n\t\t}\n\t}, [props.dataSource, props.columns]);\n\n\tconst customizeRenderEmpty = () => (\n\t\t<Row justify=\"center\" align=\"middle\" style={{ height: 360, flexDirection: 'column' }}>\n\t\t\t<img src={emptyImg} style={{ width: 266 }} alt=\"\" />\n\t\t\t<div>{t('暂无数据')}</div>\n\t\t</Row>\n\t);\n\n\tconst handdleFilterHeader = (dataColumns = [], data: any[]) => {\n\t\tconst columns = dataColumns.map((item: any) => item.dataIndex).filter((item: string) => item !== 'handle');\n\t\tconst sheetHeader = dataColumns.map((item: any) => item.title).filter((item: string) => item !== t('操作'));\n\t\tconst tarData: any = [];\n\n\t\tdata.forEach((dataRow: any) => {\n\t\t\tconst row: any = {};\n\t\t\tcolumns.map((colName: string) => {\n\t\t\t\tconst res = dataRow[colName];\n\t\t\t\trow[colName] = res || '';\n\t\t\t});\n\t\t\ttarData.push(row);\n\t\t});\n\n\t\tsetDataFormat({\n\t\t\theader: sheetHeader,\n\t\t\tdata: tarData,\n\t\t});\n\t};\n\n\t// const handleClickOutputExcel = () => {\n\t// \tconst option: any = {};\n\t// \toption.fileName = 'result';\n\t// \toption.datas = [\n\t// \t\t{\n\t// \t\t\tsheetData: dataFormat.data,\n\t// \t\t\tsheetName: 'sheet',\n\t// \t\t\tsheetHeader: dataFormat.header,\n\t// \t\t},\n\t// \t];\n\t// \tconst toExcel = new ExportJsonExcel(option);\n\t// \ttoExcel.saveExcel();\n\t// };\n\n\tconst handleExportJira = () => {\n\t\tconst header = dataFormat.header;\n\t\tconst data = dataFormat.data;\n\t\tlet str = '';\n\t\tif (header.length && data.length) {\n\t\t\tstr =\n\t\t\t\t'|' +\n\t\t\t\theader.join('|') +\n\t\t\t\t'|' +\n\t\t\t\t`\n`;\n\t\t\tdata.forEach((row: any) => {\n\t\t\t\tconst rowKey = Object.values(row).map((item) => {\n\t\t\t\t\tif (item === '') {\n\t\t\t\t\t\treturn ' ';\n\t\t\t\t\t}\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t\tstr =\n\t\t\t\t\tstr +\n\t\t\t\t\t'|' +\n\t\t\t\t\trowKey.join('|') +\n\t\t\t\t\t'|' +\n\t\t\t\t\t`\n`;\n\t\t\t});\n\t\t} else {\n\t\t\tstr = '';\n\t\t}\n\n\t\treturn str;\n\t};\n\n\tconst handleExportText = () => {\n\t\tconst header = dataFormat.header;\n\t\tconst data = dataFormat.data;\n\t\tlet str = '';\n\t\tif (header.length && data.length) {\n\t\t\tstr =\n\t\t\t\theader.join('\t') +\n\t\t\t\t`\n`;\n\t\t\tdata.forEach((row: any) => {\n\t\t\t\tconst rowKey = Object.values(row).map((item) => {\n\t\t\t\t\tif (item === '') {\n\t\t\t\t\t\treturn ' ';\n\t\t\t\t\t}\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t\tstr =\n\t\t\t\t\tstr +\n\t\t\t\t\trowKey.join('\t') +\n\t\t\t\t\t`\n`;\n\t\t\t});\n\t\t} else {\n\t\t\tstr = '';\n\t\t}\n\t\treturn str;\n\t};\n\n\treturn (\n\t\t<Space className=\"tablebox\" direction=\"vertical\" size=\"middle\">\n\t\t\t<Modal\n\t\t\t\twidth={1000}\n\t\t\t\tmaskClosable={false}\n\t\t\t\tcentered={true}\n\t\t\t\tbodyStyle={{ maxHeight: 500, overflow: 'auto' }}\n\t\t\t\tvisible={exportDataVisible}\n\t\t\t\ttitle={t('导出数据')}\n\t\t\t\tonCancel={() => {\n\t\t\t\t\tsetExportDataVisible(false);\n\t\t\t\t}}\n\t\t\t\tfooter={null}\n\t\t\t>\n\t\t\t\t<div style={{ position: 'relative' }}>\n\t\t\t\t\t<div className=\"mb16\"><span className=\"pr8\">{t('选择需要导出的列')}：</span><Checkbox.Group\n\t\t\t\t\t\toptions={props.columns\n\t\t\t\t\t\t\t.map((item: any) => ({ label: item.title, value: item.dataIndex }))\n\t\t\t\t\t\t\t.filter((item: any) => item.value !== 'handle')}\n\t\t\t\t\t\tdefaultValue={[]}\n\t\t\t\t\t\tvalue={filterValue}\n\t\t\t\t\t\tonChange={(values: any) => {\n\t\t\t\t\t\t\tsetFilterValue(values);\n\t\t\t\t\t\t\tconst columns = props.columns.filter((item: any) => ~values.indexOf(item.dataIndex));\n\t\t\t\t\t\t\thanddleFilterHeader(columns, props.dataSource);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/></div>\n\t\t\t\t\t<div style={{ position: 'absolute', right: 0, bottom: 0 }}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\ttype=\"link\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetFilterValue(\n\t\t\t\t\t\t\t\t\tprops.columns\n\t\t\t\t\t\t\t\t\t\t.map((item: any) => item.dataIndex)\n\t\t\t\t\t\t\t\t\t\t.filter((item: any) => item !== 'handle'),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\thanddleFilterHeader(props.columns, props.dataSource);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('全选')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\ttype=\"link\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetFilterValue([]);\n\t\t\t\t\t\t\t\thanddleFilterHeader([], props.dataSource);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('反选')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<Tabs>\n\t\t\t\t\t<Tabs.TabPane tab=\"Wiki格式\" key=\"jira\">\n\t\t\t\t\t\t<CopyToClipboard text={handleExportJira()} onCopy={() => message.success(t('已复制到粘贴板'))}>\n\t\t\t\t\t\t\t<pre style={{ cursor: 'pointer', minHeight: 100 }}>\n\t\t\t\t\t\t\t\t<code>{handleExportJira()}</code>\n\t\t\t\t\t\t\t</pre>\n\t\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t</Tabs.TabPane>\n\t\t\t\t\t<Tabs.TabPane tab=\"Text格式\" key=\"test\">\n\t\t\t\t\t\t<CopyToClipboard text={handleExportText()} onCopy={() => message.success(t('已复制到粘贴板'))}>\n\t\t\t\t\t\t\t<pre style={{ cursor: 'pointer', minHeight: 100 }}>\n\t\t\t\t\t\t\t\t<code>{handleExportText()}</code>\n\t\t\t\t\t\t\t</pre>\n\t\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t</Tabs.TabPane>\n\t\t\t\t\t{/* <Tabs.TabPane tab=\"Excel格式\" key=\"excel\">\n\t\t\t\t\t\t<Row justify=\"center\" align=\"middle\" style={{ minHeight: 100 }}>\n\t\t\t\t\t\t\t<Col>\n\t\t\t\t\t\t\t\t<Button type=\"primary\" onClick={handleClickOutputExcel}>\n\t\t\t\t\t\t\t\t\t导出Excel\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</Col>\n\t\t\t\t\t\t</Row>\n\t\t\t\t\t</Tabs.TabPane> */}\n\t\t\t\t</Tabs>\n\t\t\t</Modal>\n\t\t\t{\n\t\t\t\tprops.titleNode || props.buttonNode || !props.cancelExportData ? <Row justify=\"space-between\" align=\"middle\">\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<Space align=\"center\">{props.titleNode}</Space>\n\t\t\t\t\t</Col>\n\t\t\t\t\t<Col>\n\t\t\t\t\t\t<Space align=\"center\">\n\t\t\t\t\t\t\t{props.buttonNode}\n\t\t\t\t\t\t\t{props.cancelExportData ? null : (\n\t\t\t\t\t\t\t\t<Button style={{ marginLeft: 6 }} onClick={() => setExportDataVisible(true)}>\n\t\t\t\t\t\t\t\t\t{t('导出数据')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Space>\n\t\t\t\t\t</Col>\n\t\t\t\t</Row> : null\n\t\t\t}\n\t\t\t<ConfigProvider renderEmpty={customizeRenderEmpty}>\n\t\t\t\t<Table\n\t\t\t\t\tsize={props.size || 'middle'}\n\t\t\t\t\trowKey={props.rowKey ? props.rowKey : 'id'}\n\t\t\t\t\tdataSource={props.dataSource}\n\t\t\t\t\t// columns={props.columns}\n\t\t\t\t\tcomponents={{ header: { cell: ResizableTitle } }}\n\t\t\t\t\tcolumns={customColumns}\n\t\t\t\t\tpagination={props.pagination !== false ? { ...props.pagination } : false}\n\t\t\t\t\tscroll={currentTableScroll}\n\t\t\t\t\tloading={props.loading}\n\t\t\t\t\tonChange={props.onChange}\n\t\t\t\t\trowSelection={props.rowSelection}\n\t\t\t\t/>\n\t\t\t</ConfigProvider>\n\t\t</Space>\n\t);\n};\n\nexport default TableBox;\n","import React from 'react'\nimport './Loading.less';\n\nexport default function Loading() {\n    return (\n        <div className=\"dna p-a\" style={{ left: -180 }}>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n            <div className=\"ele\">\n                <div className=\"dot\"></div>\n            </div>\n        </div>\n    )\n}\n","import * as d3 from 'd3';\nimport d3TipF from 'd3-tip';\nconst d3Tip: any = d3TipF;\n\nexport interface ID3ToolParams {\n\tcontainerId: string;\n\tmainViewId: string;\n\tmargin?: number;\n}\n\nexport interface IRect {\n\tcenter: number[]\n\tcoordList: Array<{ x: number, y: number }>\n\theight: number\n\twidth: number\n\tx0: number\n\tx1: number\n\tx2: number\n\tx3: number\n\ty0: number\n\ty1: number\n\ty2: number\n\ty3: number\n}\n\ntype TD3NodeDom = d3.Selection<SVGGElement, unknown, HTMLElement, any>;\n\nexport default class D3Tool {\n\tpublic container: HTMLElement;\n\tpublic scaleView: TD3NodeDom;\n\tpublic mainView: TD3NodeDom;\n\tpublic gNode: TD3NodeDom;\n\tpublic gLink: TD3NodeDom;\n\tpublic gText: TD3NodeDom;\n\tpublic gBorder: TD3NodeDom;\n\tpublic gTextCache: TD3NodeDom;\n\tpublic innerWidth: number;\n\tpublic innerHeight: number;\n\tpublic tip: any;\n\tpublic fontSize = 14;\n\tpublic zoom: d3.ZoomBehavior<any, any>;\n\tpublic currentNode: any;\n\tpublic margin: number;\n\n\tconstructor({ containerId, mainViewId, margin = 0 }: ID3ToolParams) {\n\t\tconst _selfThis = this;\n\n\t\tthis.margin = margin;\n\t\tthis.container = document.getElementById(containerId) as HTMLElement;\n\t\tthis.mainView = d3.select(`#${mainViewId}`);\n\t\tthis.scaleView = this.mainView.append('g').attr('id', 'scaleView');\n\t\tthis.scaleView.attr('style', 'transition:all .3s');\n\n\t\tconst marginObj = { top: margin, right: margin, bottom: margin, left: margin };\n\t\tconst innerWidth = this.container.scrollWidth - marginObj.top - marginObj.bottom;\n\t\tconst innerHeight = this.container.scrollHeight - marginObj.left - marginObj.right;\n\t\t// 设置视图区域大小\n\t\tthis.mainView\n\t\t\t.attr('width', innerWidth)\n\t\t\t.attr('height', innerHeight)\n\t\t\t.attr('viewBox', `0 0 ${innerWidth} ${innerHeight}`)\n\t\t\t.attr('transform', `translate(${marginObj.left}, ${marginObj.top})`)\n\t\t// .attr('transition', 'all .3s');\n\t\t// .on('click', () => {\n\t\t// \tthis.tip.hide();\n\t\t// });\n\t\tthis.gTextCache = this.mainView.append('g').attr('id', 'gTextCache');\n\t\tthis.gBorder = this.scaleView.append('g').attr('id', 'gBorder');\n\t\tthis.gText = this.scaleView.append('g').attr('id', 'gText');\n\t\tthis.gLink = this.scaleView.append('g').attr('id', 'gLink');\n\t\tthis.gNode = this.scaleView\n\t\t\t.append('g')\n\t\t\t.attr('id', 'gNode')\n\t\t\t.attr('cursor', 'pointer')\n\t\t\t.attr('pointer-events', 'all')\n\t\t\t.attr(\"transform\", `translate(0 ${innerHeight * 0.2}) scale(.5,.5)`);\n\t\t// 设置箭头工具\n\t\tconst defs = this.scaleView.append('defs').attr('id', 'gDefs');\n\t\tdefs.append('marker')\n\t\t\t.attr('id', 'arrowRight')\n\t\t\t.attr('viewBox', '-10 -10 20 20')\n\t\t\t.attr('refX', 10)\n\t\t\t.attr('refY', 0)\n\t\t\t.attr('markerWidth', 6)\n\t\t\t.attr('markerHeight', 6)\n\t\t\t.attr('orient', 'auto')\n\t\t\t.append('path')\n\t\t\t.attr('d', 'M -10,-10 L 10,0 L -10,10')\n\t\t\t.attr('fill', '#cdcdcd')\n\t\t\t.attr('stroke-width', 2)\n\t\t\t.attr('stroke', '#cdcdcd');\n\t\t// 创建提示插件\n\t\tconst tip = d3Tip();\n\t\ttip.attr('class', 'd3-tip').html(function (d: any) {\n\t\t\treturn d;\n\t\t});\n\t\tthis.tip = tip;\n\t\tthis.mainView.call(tip);\n\t\t// 创建缩放插件\n\t\tconst zoom = d3\n\t\t\t.zoom()\n\t\t\t.scaleExtent([0.1, 2])\n\t\t\t// .scale(2)\n\t\t\t// .on(\"dblclick\", null)\n\t\t\t.on('zoom', (e: any) => {\n\t\t\t\t// console.log('graphviz zoomed with event:', e);\n\t\t\t\t// fix\n\t\t\t\t// const transform = d3.event.transform;\n\t\t\t\tconst transform = e.transform\n\t\t\t\t_selfThis.scaleView.attr('style', 'transition:all 0s').attr('transform', transform);\n\t\t\t\t_selfThis.tip.hide()\n\t\t\t}).on(\"end\", () => {\n\t\t\t\t_selfThis.scaleView.attr('style', 'transition:all 0.3s')\n\t\t\t}) as d3.ZoomBehavior<any, any>;\n\n\t\tthis.zoom = zoom;\n\t\tthis.mainView\n\t\t\t.call(zoom as any)\n\t\t\t.call(zoom.transform, d3.zoomIdentity.translate(0, 0).scale(1))\n\t\t\t.on(\"dblclick.zoom\", null);\n\n\t\tthis.innerHeight = innerHeight;\n\t\tthis.innerWidth = innerWidth;\n\t}\n\n\t/**\n\t *重新调整画布尺寸\n\t *\n\t * @memberof CostMap\n\t */\n\tpublic reSize() {\n\t\tthis.mainView.attr('width', 0).attr('height', 0).attr('viewBox', `0 0 ${0} ${0}`);\n\n\t\tconst marginObj = { top: this.margin, right: this.margin, bottom: this.margin, left: this.margin };\n\t\tconst innerWidth = this.container.scrollWidth - marginObj.top - marginObj.bottom;\n\t\tconst innerHeight = this.container.scrollHeight - marginObj.left - marginObj.right;\n\n\t\tconsole.log(this.container.scrollWidth, this.container.scrollHeight);\n\n\t\tthis.mainView\n\t\t\t.attr('width', innerWidth)\n\t\t\t.attr('height', innerHeight)\n\t\t\t.attr('viewBox', `0 0 ${innerWidth} ${innerHeight}`);\n\n\t\tthis.innerHeight = innerHeight;\n\t\tthis.innerWidth = innerWidth;\n\t}\n\n\t/**\n\t *获取文字rect dom\n\t *\n\t * @param {string} textStr\n\t * @param {number} [fontSize=14]\n\t * @returns {{ width: number; height: number }}\n\t * @memberof CostMap\n\t */\n\tpublic getTextRect(textStr: string, fontSize = 14): { width: number; height: number } {\n\t\tconst textDom = this.gTextCache.append('text').text(textStr).attr('font-size', `${fontSize}px`);\n\t\tconst textBox = textDom.node()?.getBBox();\n\t\tconst rect = {\n\t\t\twidth: textBox?.width || 0,\n\t\t\theight: textBox?.height || 0,\n\t\t};\n\t\ttextDom.remove();\n\t\treturn rect;\n\t}\n\n\t/**\n\t * 列表转树\n\t * @param data \n\t */\n\tpublic list2Tree = <T>(data: Array<T>): Array<T> => {\n\t\tconst res: T[] = [];\n\t\tconst withoutChildrenDataList = data.map((item: any) => {\n\t\t\tif (item.children) {\n\t\t\t\tdelete item.children;\n\t\t\t}\n\t\t\treturn item;\n\t\t});\n\t\tconst dataMap = this.list2Map(withoutChildrenDataList, 'ci_id');\n\t\tlet root: any;\n\t\tfor (let i = 0; i < withoutChildrenDataList.length; i++) {\n\t\t\tconst item = withoutChildrenDataList[i];\n\t\t\tif (item.parentId !== undefined) {\n\t\t\t\tconst parent = dataMap.get(item.parentId);\n\t\t\t\tif (parent.children) {\n\t\t\t\t\tparent.children.push(item);\n\t\t\t\t} else {\n\t\t\t\t\tparent.children = [item];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\troot = dataMap.get(item.ci_id);\n\t\t\t}\n\t\t}\n\t\tres.push(root);\n\t\treturn res;\n\t};\n\n\t/**\n\t * 树形结构扁平化\n\t * @param data \n\t * @param key \n\t */\n\tpublic tree2List = <T>(data: Array<T>, key = 'children'): Array<T> => {\n\t\tconst quene = [...data];\n\t\tconst res: T[] = [];\n\t\twhile (quene.length) {\n\t\t\tconst item: any = quene.shift();\n\t\t\tres.push(item);\n\t\t\tif (item && item[key]) {\n\t\t\t\tquene.push(...item[key]);\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t};\n\n\t/**\n\t * 列表转字典\n\t * @param list \n\t * @param key \n\t * @param isReplace \n\t */\n\tpublic list2Map = <T>(list: T[], key: string, isReplace = false): Map<string, T> => {\n\t\tconst map: Map<string, T> = new Map();\n\t\tfor (let i = 0; i < list.length; i++) {\n\t\t\tconst item: any = list[i];\n\t\t\tif (item && item[key] && (isReplace || !map.get(item[key]))) {\n\t\t\t\tmap.set(item[key], item);\n\t\t\t}\n\t\t}\n\t\treturn map;\n\t};\n\n\t/**\n\t * 树型结构剪枝\n\t * @param data \n\t * @param key \n\t * @param id \n\t */\n\tpublic treeCutNode = <T>(data: T[], key = 'children', matchKey = 'id', id?: string): T[] => {\n\t\tif (id === undefined) return data\n\n\t\tconst dfs = <T>(data: T[]): T[] => {\n\t\t\tconst res: T[] = []\n\t\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\t\tconst item: any = data[i];\n\t\t\t\tconst tarItem = { ...item }\n\t\t\t\tif (item[key] && item[key].length) {\n\t\t\t\t\tif (item[matchKey] === id) {\n\t\t\t\t\t\ttarItem[key] = []\n\t\t\t\t\t\tres.push(tarItem)\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarItem[key] = dfs(item[key])\n\t\t\t\t\t\tres.push(tarItem)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tres.push(tarItem)\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn res\n\t\t}\n\n\t\tconst treeCutAfter = dfs(data)\n\t\treturn treeCutAfter\n\t}\n\n\tpublic parse2Rectangle = (coords: string = '0,0 2,0 2,2 0,2') => {\n\t\tconst coordList = coords.split(' ').map(coord => {\n\t\t\tconst [x, y] = coord.split(',')\n\t\t\treturn { x: +x, y: +y }\n\t\t})\n\t\tconst rectSourceObj: any = coordList.reduce((pre, next, currentIndex) => {\n\t\t\tlet tar: any = { ...pre }\n\t\t\ttar[`x${currentIndex}`] = next.x\n\t\t\ttar[`y${currentIndex}`] = next.y\n\t\t\treturn tar\n\t\t}, {})\n\t\tconst width = rectSourceObj.x1 - rectSourceObj.x0\n\t\tconst height = rectSourceObj.y3 - rectSourceObj.y0\n\t\tconst res: IRect = {\n\t\t\tcoordList,\n\t\t\t...rectSourceObj,\n\t\t\twidth: Math.abs(width),\n\t\t\theight: Math.abs(height),\n\t\t\tcenter: [width / 2, height / 2]\n\t\t}\n\t\treturn res\n\t}\n}\n","/* eslint-disable @typescript-eslint/no-invalid-this */\n/* eslint-disable @typescript-eslint/no-this-alias */\nimport * as d3 from 'd3';\nimport D3Tool, { ID3ToolParams } from './D3Tool';\nimport { graphviz } from 'd3-graphviz';\nimport React from 'react';\nimport { INodeItem } from './TreePlusInterface';\n// 防止被treeShaking\nconst graphvizName = graphviz.name;\n\ninterface IThemeColor {\n\tbackground: string;\n\tcolor: string;\n\tborder: string;\n\tactiveColor?: string;\n\tactiveBackground?: string;\n\tdisabled?: string\n\tdisabledColor?: string\n}\n\ninterface IPreHandleNode extends INodeItem {\n\trelativeKey: 'parent' | 'children'\n\tkey: string\n\tlevel: number;\n\tchildren: IPreHandleNode[],\n\tparent: IPreHandleNode[]\n\tcollectNum?: number\n\tcollectionNodes?: IPreHandleNode[]\n\texpandsNumParent?: number\n\tcollectionParent?: IPreHandleNode[]\n\texpandsNumChildren?: number\n\tcollectionChildren?: IPreHandleNode[]\n\tisCollectionNode?: boolean\n\tdata_fields: string\n}\n\ninterface IRenderNode {\n\tid: string | number;\n\tx: string | number;\n\ty: string | number;\n\trenderId: string | number;\n\tdata?: IPreHandleNode\n\ttheme: IThemeColor\n\trenderInfo?: any\n}\n\nconst NodeTypeList = ['ROOT', 'BUSINESS', 'THEME', 'COLLECT']\n\nconst ThemeColor: IThemeColor[] = [\n\t{ background: '#00d4001a', color: '#00d400', border: '#00d400', activeColor: '#0078d4', disabled: '#cdcdcd1a', disabledColor: '#cdcdcd' },\n\t{ background: '#00d4c81a', color: '#00d4c8', border: '#00d4c8', activeColor: '#0078d4', disabled: '#cdcdcd1a', disabledColor: '#cdcdcd' },\n\t{ background: '#0000d41a', color: '#0000d4', border: '#0000d4', activeColor: '#0078d4', disabled: '#cdcdcd1a', disabledColor: '#cdcdcd' },\n\t{ background: '#c800d41a', color: '#c800d4', border: '#c800d4', activeColor: '#0078d4', disabled: '#cdcdcd1a', disabledColor: '#cdcdcd' },\n\t{ background: '#d464001a', color: '#d46400', border: '#d46400', activeColor: '#0078d4', disabled: '#cdcdcd1a', disabledColor: '#cdcdcd' },\n\n\t{ background: '#96d4001a', color: '#96d400', border: '#96d400', activeColor: '#0078d4', disabled: '#cdcdcd1a', disabledColor: '#cdcdcd' },\n\t{ background: '#00d4961a', color: '#00d496', border: '#00d496', activeColor: '#0078d4', disabled: '#cdcdcd1a', disabledColor: '#cdcdcd' },\n\t{ background: '#0096d41a', color: '#0096d4', border: '#0096d4', activeColor: '#0078d4', disabled: '#cdcdcd1a', disabledColor: '#cdcdcd' },\n\t{ background: '#6400d41a', color: '#6400d4', border: '#6400d4', activeColor: '#0078d4', disabled: '#cdcdcd1a', disabledColor: '#cdcdcd' },\n\t{ background: '#d400001a', color: '#d40000', border: '#d40000', activeColor: '#0078d4', disabled: '#cdcdcd1a', disabledColor: '#cdcdcd' },\n\t{ background: '#d4c8001a', color: '#d4c800', border: '#d4c800', activeColor: '#0078d4', disabled: '#cdcdcd1a', disabledColor: '#cdcdcd' },\n];\n\nconst nodeTypeThemeMap: Record<string, IThemeColor> = NodeTypeList.reduce((pre, next, index) => ({ ...pre, [next]: ThemeColor[index % ThemeColor.length] }), {})\n\ninterface IRelationDiagramProps extends ID3ToolParams {\n\tisCollection?: boolean\n}\n\nexport default class RelationDiagram extends D3Tool {\n\n\tpublic dataMap = new Map<string, IPreHandleNode>();\n\tpublic dataMapByName = new Map<string, IPreHandleNode>();\n\tpublic renderNodesMap = new Map<string, IRenderNode>();\n\tpublic nodesInGraphMap = new Map<string, IPreHandleNode>();\n\tpublic nodesInCollectionMap = new Map<string, IPreHandleNode>();\n\tpublic dataNodes: IPreHandleNode[] = [];\n\tpublic activeNodeId?: string;\n\tpublic rootNode?: IPreHandleNode\n\tpublic handleNodeClick?: ((node: any) => void);\n\tpublic loadingStart?: (() => void);\n\tpublic loadingEnd?: (() => void);\n\tprivate isCollection?: boolean\n\n\tconstructor({ containerId, mainViewId, margin = 0, isCollection }: IRelationDiagramProps) {\n\t\tsuper({ containerId, mainViewId, margin });\n\t\tthis.isCollection = !!isCollection\n\t}\n\n\tpublic htmlStrEnCode = (str: string) => {\n\t\tconst res = `${str}`.replace(/[\\u00A0-\\u9999<>\\-\\&\\:]/g, function (i) {\n\t\t\treturn '&#' + i.charCodeAt(0) + ';';\n\t\t})\n\t\treturn res\n\t}\n\n\tpublic enCodeNodeId(id: string) {\n\t\treturn `node_${id.split('').map(item => item.charCodeAt(0)).join('')}`\n\t}\n\n\tpublic deCodeNodeId(id: string) {\n\t\tconst sourceId = id.replace(/^node_/, '').replaceAll('_rep_', ':').replaceAll('_mid_', '-')\n\t\treturn this.htmlStrEnCode(sourceId)\n\t}\n\n\n\tpublic preHandleNodes(nodes: INodeItem[], relativeKey: 'children' | 'parent' = 'children'): IPreHandleNode[] {\n\t\tconst nodesMapByKey = new Map<string | number, IPreHandleNode>()\n\t\tconst nodesMapById = new Map<string | number, IPreHandleNode>()\n\t\t// const rootId = this.enCodeNodeId((nodes[0] || {}).nid || '')\n\t\tconst rootIds = nodes.map((node, index) => `node_${relativeKey}_${index}`)\n\t\tconst childrenKey = relativeKey\n\t\tconst parentKey = relativeKey === 'children' ? 'parent' : 'children'\n\n\t\t// 处理树结构上的每一个节点\n\t\tconst dfs = (nodes: INodeItem[], level = 0, upItem?: IPreHandleNode, idPath: string[] = []): IPreHandleNode[] => {\n\t\t\tconst res: IPreHandleNode[] = [];\n\n\t\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\t\tconst node = nodes[i];\n\t\t\t\tidPath.push(`${i}`)\n\t\t\t\tconst encodeKey = this.htmlStrEnCode(node.nid)\n\t\t\t\tlet key = `node_${relativeKey}_${idPath.join('_')}`\n\n\t\t\t\tconst nodeCacheById = nodesMapById.get(node.nid)\n\t\t\t\tif (nodeCacheById) {\n\t\t\t\t\tkey = nodeCacheById.key\n\t\t\t\t}\n\t\t\t\tconst nodeCache = nodesMapByKey.get(key)\n\n\t\t\t\tlet tarNode: IPreHandleNode = {\n\t\t\t\t\t...node,\n\t\t\t\t\tkey,\n\t\t\t\t\tlevel,\n\t\t\t\t\trelativeKey,\n\t\t\t\t\t// 构建双向链表结构\n\t\t\t\t\t[parentKey]: upItem ? [upItem] : [],\n\t\t\t\t\t[childrenKey]: []\n\t\t\t\t} as IPreHandleNode\n\n\t\t\t\t// 处理已经遍历过得情况\n\t\t\t\tif (nodeCache) {\n\t\t\t\t\tconst flag = nodeCache[parentKey].map(node => node.key).includes(upItem?.key || '')\n\t\t\t\t\t// const flag = false\n\t\t\t\t\tif (flag) {\n\t\t\t\t\t\ttarNode = nodeCache\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarNode = {\n\t\t\t\t\t\t\t...nodeCache,\n\t\t\t\t\t\t\t// 构建双向链表结构\n\t\t\t\t\t\t\t[parentKey]: [upItem, ...nodeCache[parentKey]],\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (node[childrenKey] && node[childrenKey]?.length) {\n\t\t\t\t\tdfs(node[childrenKey] || [], level + 1, tarNode, idPath)\n\t\t\t\t}\n\n\t\t\t\tnodesMapByKey.set(tarNode.key, tarNode)\n\t\t\t\tnodesMapById.set(tarNode.nid, tarNode)\n\t\t\t\tres.push(tarNode);\n\n\t\t\t\tidPath.pop()\n\t\t\t}\n\t\t\treturn res;\n\t\t};\n\n\t\tdfs(nodes)\n\n\t\t// 节点重构建\n\t\tnodesMapByKey.forEach(item => {\n\t\t\tconst currentItemList = item[parentKey]\n\t\t\tfor (let i = 0; i < currentItemList.length; i++) {\n\t\t\t\tconst currentItem = currentItemList[i];\n\t\t\t\tconst itemId = currentItem.key\n\t\t\t\tconst tarItem = nodesMapByKey.get(itemId)\n\t\t\t\tif (tarItem) {\n\t\t\t\t\ttarItem[childrenKey].push(item)\n\t\t\t\t\tnodesMapByKey.set(itemId, tarItem)\n\t\t\t\t}\n\t\t\t}\n\t\t\t// 更新当前节点关系\n\t\t\titem[parentKey] = item[parentKey].map(node => nodesMapByKey.get(node.key)) as IPreHandleNode[]\n\t\t\tnodesMapByKey.set(item.key, item)\n\t\t})\n\n\t\tconst rootNode = rootIds.map(rootId => nodesMapByKey.get(rootId) as IPreHandleNode)\n\t\tconst res = rootNode ? [...rootNode] : []\n\n\t\treturn res;\n\t}\n\n\tpublic initData<T extends INodeItem>(data: T[]) {\n\t\t// 初始化\n\t\tthis.nodesInCollectionMap = new Map()\n\t\tthis.dataNodes = []\n\n\t\tconsole.log('data', data);\n\n\t\t// 这一步之后已经构建了完整的链路关系\n\t\tconst preHandlePreData: IPreHandleNode[] = this.preHandleNodes(data, 'parent');\n\t\tconst preHandleNextData: IPreHandleNode[] = this.preHandleNodes(data, 'children');\n\n\t\tconsole.log('preHandleNextData', preHandleNextData);\n\n\t\t// if (this.isCollection) {\n\t\t// \tthis.handleCollectionNodes(preHandlePreData, 'parent')\n\t\t// \tthis.handleCollectionNodes(preHandleNextData, 'children')\n\t\t// }\n\n\t\t// 合并根节点\n\t\t// const [preRoot] = preHandlePreData\n\t\t// const [nextRoot] = preHandleNextData\n\t\t// if (preRoot && nextRoot) {\n\t\t// \tpreHandlePreData[0].key = `node_0`\n\t\t// \tpreHandlePreData[0].children = nextRoot.children\n\t\t// \tpreHandlePreData[0].expandsNumChildren = nextRoot.expandsNumChildren\n\t\t// \tpreHandlePreData[0].collectionChildren = nextRoot.collectionChildren\n\n\t\t// \tpreHandleNextData[0].key = `node_0`\n\t\t// \tpreHandleNextData[0].parent = preRoot.parent\n\t\t// \tpreHandleNextData[0].expandsNumParent = preRoot.expandsNumParent\n\t\t// \tpreHandleNextData[0].collectionParent = preRoot.collectionParent\n\t\t// }\n\n\t\t// 合并根节点\n\t\tfor (let i = 0; i < preHandleNextData.length; i++) {\n\t\t\tpreHandleNextData[i].key = `node_${i}`;\n\t\t\tpreHandleNextData[i].parent = preHandlePreData[i].parent\n\t\t}\n\n\t\tconst rootNode = preHandleNextData[0];\n\t\tconst preHandleData = preHandleNextData\n\t\tthis.rootNode = rootNode;\n\n\t\tconst preRenderData = this.preRenderDataReady(preHandleData)\n\n\t\tconsole.log('preRenderData', preRenderData);\n\n\t\tthis.renderNode(preRenderData).then(() => {\n\t\t\t// if (rootNode) {\n\t\t\t// \tthis.anchorNode(rootNode.key);\n\t\t\t// }\n\t\t\tthis.centerApp()\n\t\t})\n\t}\n\n\tpublic preRenderDataReady(nodes?: IPreHandleNode[]) {\n\n\t\tif (nodes?.length) {\n\t\t\t// 扁平化\n\t\t\tconst preData = this.tree2List(nodes, 'parent');\n\t\t\tconst nextData = this.tree2List(nodes, 'children');\n\t\t\tconst targetData = [...preData, ...nextData];\n\n\t\t\t// 构建图的Map\n\t\t\tconst targetDataMap = this.list2Map(targetData, 'key');\n\t\t\tconst targetDataMapByName = this.list2Map(targetData, 'node_name');\n\t\t\tconst dataNodes: IPreHandleNode[] = [];\n\t\t\ttargetDataMap.forEach((item) => {\n\t\t\t\tdataNodes.push(item);\n\t\t\t});\n\t\t\tthis.dataMap = targetDataMap;\n\t\t\tthis.dataMapByName = targetDataMapByName;\n\t\t\tthis.dataNodes = dataNodes;\n\t\t} else {\n\t\t\tthis.dataNodes = []\n\t\t}\n\t\treturn this.dataNodes\n\t}\n\n\t/**\n\t * 构造渲染节点\n\t * @param nodes \n\t */\n\tpublic createRenderNodes(nodes: IPreHandleNode[], isDisable?: boolean): string[] {\n\n\t\tconst res = nodes.map((node) => {\n\t\t\tconst isInCollection = this.nodesInCollectionMap.get(node.key)\n\t\t\tif (!isInCollection) {\n\t\t\t\tif (node.data_fields === 'COLLECT') {\n\t\t\t\t\treturn `${node['key']}\n\t\t\t\t\t[label=\"聚合节点，剩余${node.collectNum}个节点(双击展开) + \",\n\t\t\t\t\t\tshape=box,\n\t\t\t\t\t\tstyle=dashed,\n\t\t\t\t\t\tmargin=0,\n\t\t\t\t\t\tid=${node.key}\n\t\t\t\t\t];`;\n\t\t\t\t}\n\n\t\t\t\treturn `${node['key']}\n\t\t\t\t\t[label=\"占位符占位符占位${node.key}\",\n\t\t\t\t\t\tshape=box,\n\t\t\t\t\t\twidth=8,\n\t\t\t\t\t\theight=0.8,\n\t\t\t\t\t\tmargin=0,\n\t\t\t\t\t\tid=${node.key}\n\t\t\t\t\t];`;\n\t\t\t} else {\n\t\t\t\treturn ''\n\t\t\t}\n\t\t});\n\t\treturn res.filter(item => !!item)\n\t}\n\n\t/**\n\t * 构造渲染关系（边）\n\t * @param nodes \n\t */\n\tpublic cerateRenderNodesRelation(nodes: IPreHandleNode[]) {\n\t\tconst res: string[] = [];\n\t\tnodes.forEach((node) => {\n\t\t\tconst { parent, children } = node;\n\n\t\t\t(parent || []).forEach((parent: any) => {\n\t\t\t\tconst isInCollection = this.nodesInCollectionMap.get(node.key) || this.nodesInCollectionMap.get(parent.key)\n\t\t\t\tif (!isInCollection) {\n\t\t\t\t\tconst tar = `\n\t\t\t\t\t${(parent.key)}->${(node.key)} [id=\"edgePre_${(parent.key)}_edge_${(node.key)}\"];`;\n\t\t\t\t\tif (res.indexOf(tar) === -1) {\n\t\t\t\t\t\tres.push(tar);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t(children || []).forEach((child: any) => {\n\t\t\t\tconst isInCollection = this.nodesInCollectionMap.get(node.key) || this.nodesInCollectionMap.get(child.key)\n\t\t\t\tif (!isInCollection) {\n\t\t\t\t\tconst tar = `\n\t\t\t\t\t${(node.key)}->${(child.key)} [id=\"edgePre_${(node.key)}_edge_${(child.key)}\"];`;\n\t\t\t\t\tif (res.indexOf(tar) === -1) {\n\t\t\t\t\t\tres.push(tar);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn res;\n\t}\n\n\t/**\n\t * 渲染后处理，事件绑定等等\n\t */\n\tpublic backRenderHandle() {\n\t\tconst _selfThis = this;\n\t\tconst renderNodesMap = new Map<string, IRenderNode>();\n\t\t// 去掉多余的提示信息\n\t\td3.selectAll('title').remove()\n\n\t\td3.selectAll('.node').each((item: any) => {\n\t\t\ttry {\n\t\t\t\tconst key = item.key;\n\t\t\t\tconst nodeData = this.dataMap?.get(key)\n\t\t\t\tconst currentColorTheme = nodeTypeThemeMap[nodeData?.data_fields || ''] || ThemeColor[0]\n\t\t\t\tconst box: any = d3.selectAll(`#${key} polygon`).datum();\n\t\t\t\tconst tar = {\n\t\t\t\t\trenderInfo: item,\n\t\t\t\t\trenderId: key,\n\t\t\t\t\tdata: nodeData,\n\t\t\t\t\ttheme: currentColorTheme,\n\t\t\t\t\tid: key,\n\t\t\t\t\tx: box.center.x,\n\t\t\t\t\ty: box.center.y,\n\t\t\t\t};\n\t\t\t\trenderNodesMap.set(key, tar);\n\n\t\t\t\td3.selectAll(`#${key} text[fill=\"#000000\"]`).attr('type', `mainText`);\n\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\n\t\t\t// 调试位置坐标\n\t\t\t// d3.selectAll(`#${nodeId}`)\n\t\t\t// \t.append('g')\n\t\t\t// \t.append('text')\n\t\t\t// \t.text(`${box.attributes.x},${box.attributes.y}`)\n\t\t\t// \t.attr('fill', '#ff0000')\n\t\t\t// \t.attr('x', box.attributes.x)\n\t\t\t// \t.attr('y', box.attributes.y + 300);\n\t\t});\n\n\t\tthis.renderNodesMap = renderNodesMap;\n\n\t\tthis.beautifulNode()\n\n\t\tlet tipsContent: JSX.Element;\n\n\t\t// d3.selectAll('.node')\n\t\t// \t.on('mouseenter', function (node: any, d: any) {\n\t\t// \t\tconst key = node.key;\n\t\t// \t\tconst curNode = _selfThis.dataMap?.get(Number(key));\n\t\t// \t\ttipsContent = (\n\t\t// \t\t\t<div>\n\t\t// \t\t\t\t<div className=\"pb12 d-f jc-b ac fs16\">\n\t\t// \t\t\t\t\t<strong>详情</strong>\n\t\t// \t\t\t\t</div>\n\t\t// \t\t\t\t<div>{123}</div>\n\t\t// \t\t\t</div>\n\t\t// \t\t);\n\t\t// \t\t_selfThis.tip\n\t\t// \t\t\t.offset([0, 0])\n\t\t// \t\t\t.show(ReactDOMServer.renderToString(tipsContent), this);\n\t\t// \t})\n\t\t// \t.on('mouseleave', function (node: any, d: any) {\n\t\t// \t\t_selfThis.tip.hide();\n\t\t// \t});\n\n\t\t// d3.select('.d3-tip')\n\t\t// \t.on('mouseenter', function (node: any, d: any) {\n\t\t// \t\t_selfThis.tip.show(ReactDOMServer.renderToString(tipsContent));\n\t\t// \t})\n\t\t// \t.on('mouseleave', function (node: any, d: any) {\n\t\t// \t\t_selfThis.tip.hide();\n\t\t// \t});\n\n\n\t\t// 区分单双击事件\n\t\tlet timeout: any = null;\n\t\td3.selectAll('.node[type=\"collect\"]')\n\t\t\t.on('click', function (node: any, d: any) {\n\t\t\t\tclearTimeout(timeout);\n\n\t\t\t\ttimeout = setTimeout(function () {\n\t\t\t\t\t_selfThis.handleNodeClick && _selfThis.handleNodeClick(node)\n\t\t\t\t}, 200)\n\t\t\t})\n\t\t// .on('dblclick', function (node: any, d: any) {\n\t\t// \tclearTimeout(timeout);\n\n\t\t// \t_selfThis.handleCollectExpand(node.key)\n\n\t\t// \tconst rootNode = _selfThis.dataMap?.get(_selfThis.rootNode?.key || '') as IPreHandleNode\n\t\t// \tconst preRenderData = _selfThis.preRenderDataReady(rootNode)\n\t\t// \t_selfThis.renderNode(preRenderData).then(() => { })\n\t\t// })\n\n\t\tconst d3MainView = document.getElementById('d3MainView')\n\t\tif (d3MainView) {\n\t\t\td3MainView.onclick = (e: any) => {\n\t\t\t\tlet isNode = false\n\t\t\t\tfor (let i = 0; i < e.path.length; i++) {\n\t\t\t\t\tconst elem = e.path[i];\n\t\t\t\t\tif (elem.id && ~elem.id.indexOf('node_')) {\n\t\t\t\t\t\tisNode = true\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!isNode) {\n\t\t\t\t\t_selfThis.refresh()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic beautifulNode() {\n\t\tconst _selfThis = this\n\t\tconst boxs = d3.selectAll('.node polygon').data()\n\n\t\tconsole.log('boxs', boxs);\n\n\t\tboxs.forEach((item: any) => {\n\t\t\tconst box = item.bbox\n\t\t\tconst pid = item.parent.key\n\t\t\tconst nodeData = this.dataMap?.get(pid)\n\n\t\t\tif (nodeData) {\n\t\t\t\td3.select(`#${pid}`).remove()\n\t\t\t\td3.select('#mainGroup')\n\t\t\t\t\t.append('g')\n\t\t\t\t\t.attr('id', pid)\n\t\t\t\t\t.attr('class', 'node')\n\t\t\t\t\t.attr('type', 'normal')\n\t\t\t\t\t.on('click', function (node: any, d: any) {\n\t\t\t\t\t\tconst dataNode = _selfThis.renderNodesMap?.get(this.id)\n\t\t\t\t\t\tif (dataNode) {\n\t\t\t\t\t\t\t_selfThis.highlightRelation(dataNode)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_selfThis.handleNodeClick && _selfThis.handleNodeClick(dataNode?.data)\n\t\t\t\t\t})\n\t\t\t\t\t.append('rect')\n\t\t\t\t\t.attr('id', `rect_${pid}`)\n\t\t\t\t\t.attr('x', box.x)\n\t\t\t\t\t.attr('y', box.y)\n\t\t\t\t\t.attr('rx', box.height / 2)\n\t\t\t\t\t.attr('ry', box.height / 2)\n\t\t\t\t\t.attr('width', box.width)\n\t\t\t\t\t.attr('height', box.height)\n\t\t\t\t\t.attr('fill', '#fff')\n\t\t\t\t\t.attr('stroke', '#cdcdcd')\n\t\t\t\t\t.attr('stroke-width', 1)\n\t\t\t\t\t.attr('style', 'transition:all 0.3s;')\n\n\t\t\t\td3.select(`#${pid}`)\n\t\t\t\t\t.append('path')\n\t\t\t\t\t.attr('d', `M${box.x} ${box.cy} L${box.x + box.width * 2 / 3} ${box.cy}`)\n\t\t\t\t\t.attr('stroke', '#cdcdcd')\n\t\t\t\t\t.attr('stroke-dasharray', '5,5')\n\n\t\t\t\td3.select(`#${pid}`)\n\t\t\t\t\t.append('rect')\n\t\t\t\t\t.attr('class', 'rectBg')\n\t\t\t\t\t.attr('x', box.x)\n\t\t\t\t\t.attr('y', box.y)\n\t\t\t\t\t.attr('rx', box.height / 2)\n\t\t\t\t\t.attr('ry', box.height / 2)\n\t\t\t\t\t.attr('width', box.height)\n\t\t\t\t\t.attr('height', box.height)\n\t\t\t\t\t.attr('fill', nodeData.color)\n\n\t\t\t\td3.select(`#${pid}`)\n\t\t\t\t\t.append('rect')\n\t\t\t\t\t.attr('class', 'rectBg')\n\t\t\t\t\t.attr('id', `iconRect_${pid}`)\n\t\t\t\t\t.attr('x', box.x + box.height / 4)\n\t\t\t\t\t.attr('y', box.y)\n\t\t\t\t\t.attr('rx', box.height / 2)\n\t\t\t\t\t.attr('ry', box.height / 2)\n\t\t\t\t\t.attr('width', box.height / 2)\n\t\t\t\t\t.attr('height', box.height)\n\t\t\t\t\t.attr('fill', nodeData.color)\n\t\t\t\t\t.attr('style', 'transition:all 0.3s;')\n\n\t\t\t\td3.select(`#${pid}`)\n\t\t\t\t\t.append('g')\n\t\t\t\t\t.attr('id', `icon_${pid}`)\n\t\t\t\t\t.html(nodeData.icon)\n\n\t\t\t\td3.select(`#icon_${pid} svg`)\n\t\t\t\t\t.attr('fill', '#fff')\n\t\t\t\t\t.attr('width', box.height / 2)\n\t\t\t\t\t.attr('height', box.height / 2)\n\t\t\t\t\t.attr('x', box.x + box.height / 4)\n\t\t\t\t\t.attr('y', box.y + box.height * 0.23)\n\n\t\t\t\td3.select(`#${pid}`)\n\t\t\t\t\t.append('text')\n\t\t\t\t\t.text(nodeData.title)\n\t\t\t\t\t.attr('class', 'nodeType')\n\t\t\t\t\t.attr('x', box.x + box.height * 1.2)\n\t\t\t\t\t.attr('y', box.y + box.height * 0.75 / 2)\n\t\t\t\t\t.attr('width', box.height)\n\t\t\t\t\t.attr('height', box.height)\n\t\t\t\t\t.attr('font-weight', 'bold')\n\t\t\t\t\t.attr('fill', nodeData.color)\n\t\t\t\t// .attr('text-anchor', 'start')\n\t\t\t\t// .attr('dominant-baseline', 'start')\n\n\t\t\t\td3.select(`#${pid}`)\n\t\t\t\t\t.on(\"mouseover\", function (d) {\n\t\t\t\t\t\td3.select(`#rect_${pid}`).attr(\"stroke\", nodeData.color);\n\t\t\t\t\t\td3.select(`#iconRect_${pid}`)\n\t\t\t\t\t\t\t.attr(\"rx\", 0)\n\t\t\t\t\t\t\t.attr(\"ry\", 0)\n\t\t\t\t\t\t\t.attr('x', box.x + box.height / 2);\n\t\t\t\t\t})\n\t\t\t\t\t.on(\"mouseout\", function (d) {\n\t\t\t\t\t\td3.select(`#rect_${pid}`).attr(\"stroke\", \"#cdcdcd\");\n\t\t\t\t\t\td3.select(`#iconRect_${pid}`)\n\t\t\t\t\t\t\t.attr('rx', box.height / 2)\n\t\t\t\t\t\t\t.attr('ry', box.height / 2)\n\t\t\t\t\t\t\t.attr('x', box.x + box.height / 4)\n\t\t\t\t\t})\n\n\t\t\t\td3.select(`#${pid}`)\n\t\t\t\t\t.append('text')\n\t\t\t\t\t.text(nodeData.name)\n\t\t\t\t\t.attr('class', 'nodeContent')\n\t\t\t\t\t.attr('x', box.x + box.height * 1.2)\n\t\t\t\t\t.attr('y', box.y + box.height * 0.8)\n\t\t\t\t\t.attr('width', box.height)\n\t\t\t\t\t.attr('height', box.height)\n\n\n\t\t\t\t// d3.select(`#${pid}`)\n\t\t\t\t// \t.append('g')\n\t\t\t\t// \t.attr('id', `icon_status_${pid}`)\n\t\t\t\t// \t.html(nodeData.status.icon)\n\n\t\t\t\t// d3.select(`#icon_status_${pid} svg`)\n\t\t\t\t// \t.attr('fill', '#000')\n\t\t\t\t// \t.attr('width', box.height / 3)\n\t\t\t\t// \t.attr('height', box.height / 3)\n\t\t\t\t// \t.attr('x', box.x + box.width - box.height * 2 / 3)\n\t\t\t\t// \t.attr('y', box.y + box.height * 0.2 / 2)\n\n\t\t\t\td3.select(`#${pid}`)\n\t\t\t\t\t.append('g')\n\t\t\t\t\t.attr('id', `icon_status_text_${pid}`)\n\t\t\t\t\t.append('text')\n\t\t\t\t\t.text(nodeData.status.label)\n\t\t\t\t\t.attr('x', box.x + box.width - box.height * 2.8 / 3)\n\t\t\t\t\t.attr('y', box.y + box.height * 0.6 / 2)\n\n\t\t\t}\n\t\t})\n\t}\n\n\tpublic handleCollectExpand(nodeKey: string) {\n\t\tconst currentNode = this.dataMap.get(nodeKey)\n\t\tconst currentNodeInGraph = currentNode?.relativeKey\n\t\tconst [tarParent] = currentNode?.parent || []\n\t\tconst [tarChildren] = currentNode?.children || []\n\t\tconst parentNode = tarParent && this.dataMap?.get(tarParent.key)\n\t\tconst childrenNode = tarChildren && this.dataMap?.get(tarChildren.key)\n\n\t\tif (parentNode && currentNode && currentNodeInGraph === 'children') {\n\t\t\tconst collection = parentNode.collectionChildren || []\n\t\t\tconst children = parentNode.children || []\n\t\t\tconst collectionTypeNode = parentNode.children.pop() as IPreHandleNode\n\t\t\tconst targetNode = collection.shift()\n\n\t\t\tif (targetNode) {\n\t\t\t\t// 处理在节点collect里存在关系的情况\n\t\t\t\tthis.nodesInCollectionMap.delete(targetNode.key)\n\t\t\t\tconst nodesQuene = [...targetNode.children]\n\t\t\t\twhile (nodesQuene.length) {\n\t\t\t\t\tconst nodeItem = nodesQuene.shift()\n\t\t\t\t\tif (nodeItem) {\n\t\t\t\t\t\tthis.nodesInCollectionMap.delete(nodeItem.key)\n\t\t\t\t\t\tnodesQuene.push(...(nodeItem.children || []))\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// 处理展开关系\n\t\t\t\tcurrentNode.collectNum = (currentNode.collectNum || 0) - 1\n\t\t\t\tcurrentNode.collectionNodes = collection\n\t\t\t\tparentNode.collectionChildren = collection\n\t\t\t\tif (collection.length) {\n\t\t\t\t\tparentNode.children = [...children, targetNode, collectionTypeNode]\n\t\t\t\t} else {\n\t\t\t\t\tparentNode.children = [...children, targetNode]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (childrenNode && currentNode && currentNodeInGraph === 'parent') {\n\t\t\tconst collection = childrenNode.collectionParent || []\n\t\t\tconst parent = childrenNode.parent || []\n\t\t\tconst collectionTypeNode = childrenNode.parent.pop() as IPreHandleNode\n\t\t\tconst targetNode = collection.shift()\n\n\t\t\tif (targetNode) {\n\t\t\t\t// 处理在节点collect里存在关系的情况\n\t\t\t\tthis.nodesInCollectionMap.delete(targetNode.key)\n\t\t\t\tconst nodesQuene = [...targetNode.parent]\n\t\t\t\twhile (nodesQuene.length) {\n\t\t\t\t\tconst nodeItem = nodesQuene.shift()\n\t\t\t\t\tif (nodeItem) {\n\t\t\t\t\t\tthis.nodesInCollectionMap.delete(nodeItem.key)\n\t\t\t\t\t\tnodesQuene.push(...(nodeItem.parent || []))\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// 处理展开关系\n\t\t\t\tcurrentNode.collectNum = (currentNode.collectNum || 0) - 1\n\t\t\t\tcurrentNode.collectionNodes = collection\n\t\t\t\tchildrenNode.collectionParent = collection\n\t\t\t\tif (collection.length) {\n\t\t\t\t\tchildrenNode.parent = [...parent, targetNode, collectionTypeNode]\n\t\t\t\t} else {\n\t\t\t\t\tchildrenNode.parent = [...parent, targetNode]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * 渲染节点\n\t * @param nodes\n\t */\n\tpublic renderNode(nodes: IPreHandleNode[], isDisable?: boolean) {\n\t\tthis.loadingStart && this.loadingStart()\n\t\t// console.log('nodes', nodes);\n\t\t// console.log('nodesInCollectionMap', this.nodesInCollectionMap);\n\t\t// console.log('nodesInGraphMap', this.nodesInGraphMap);\n\n\t\tconst nodesRender = this.createRenderNodes(nodes, isDisable)\n\t\tconst nodesRenderRelation = this.cerateRenderNodesRelation(nodes);\n\t\tconst dotSrc = `digraph  {\n\t\t\tid=mainGroup;\n\t\t\trankdir = LR;\n\t\t\tranksep = 1;\n\t\t\tnodesep = 1;\n\t\t\tedge [color=\"#cdcdcd\"];\n\t\t\t${nodesRender.join(' ')} ${nodesRenderRelation.join(' ')}\n        }`;\n\n\t\tconst test = (d3.select('#gNode') as any)\n\t\t\t.graphviz({\n\t\t\t\tzoom: false,\n\t\t\t\tzoomTranslateExtent: [0, 0],\n\t\t\t\t// width: this.innerWidth,\n\t\t\t\t// height: this.innerHeight\n\t\t\t})\n\t\t\t.dot(dotSrc);\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\ttry {\n\t\t\t\t\t(d3.select('#gNode') as any)\n\t\t\t\t\t\t.graphviz({\n\t\t\t\t\t\t\tzoom: false,\n\t\t\t\t\t\t\tzoomTranslateExtent: [0, 0],\n\t\t\t\t\t\t\t// width: this.innerWidth,\n\t\t\t\t\t\t\t// height: this.innerHeight\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.renderDot(dotSrc);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t}\n\n\t\t\t\t// 后处理\n\t\t\t\tthis.backRenderHandle()\n\n\t\t\t\tthis.loadingEnd && this.loadingEnd()\n\t\t\t\tresolve('')\n\t\t\t}, 100)\n\t\t})\n\t}\n\n\tpublic highlightRelation(node: IRenderNode) {\n\n\t\t// 全局置灰\n\t\td3.selectAll(`.node polygon`).attr('stroke', '#cdcdcd').attr('fill', '#ffffff');\n\t\td3.selectAll(`.node text`).attr('fill', '#cdcdcd');\n\t\td3.selectAll(`.node .rectBg`).attr('fill', '#cdcdcd');\n\t\td3.selectAll(`.edge path`).attr('stroke', '#cdcdcd');\n\t\td3.selectAll(`.edge polygon`).attr('stroke', '#cdcdcd').attr('fill', '#cdcdcd');\n\n\t\tconst cutTreeNodeParent = this.treeCutNode([node.data], 'parent', 'key', this.rootNode?.key)\n\t\tconst cutTreeNodeChildren = this.treeCutNode([node.data], 'children', 'key', this.rootNode?.key)\n\t\tconst nodeParentList = this.tree2List(cutTreeNodeParent, 'parent')\n\t\tconst nodeChildrenList = this.tree2List(cutTreeNodeChildren, 'children')\n\n\t\tconsole.log('nodeParentList', nodeParentList);\n\n\t\tfor (let i = 0; i < nodeParentList.length; i++) {\n\t\t\tconst item = nodeParentList[i];\n\n\t\t\t// 高亮节点\n\t\t\tif (item) {\n\t\t\t\t// d3.selectAll(`#${item.key} polygon`).attr('stroke', '#0078d4').attr('fill', '#ffffff');\n\t\t\t\t// d3.selectAll(`#${item.key} text`).attr('fill', '#0078d4');\n\t\t\t\t// d3.selectAll(`#${item.key} #rect_${item.key}`).attr('stroke', '#1e1653');\n\t\t\t\t// const currentColorTheme = nodeTypeThemeMap[item.data_fields] || ThemeColor[0]\n\t\t\t\tconst currentColor = item.color\n\t\t\t\td3.selectAll(`#${item.key} .rectBg`).attr('fill', currentColor);\n\t\t\t\td3.selectAll(`#${item.key} .nodeType`).attr('fill', currentColor);\n\t\t\t\td3.selectAll(`#${item.key} .nodeContent`).attr('fill', '#000');\n\t\t\t}\n\n\t\t\t// 高亮边\n\t\t\tif (item && item.parent && item.parent.length) {\n\t\t\t\tfor (let i = 0; i < item.parent.length; i++) {\n\t\t\t\t\tconst par = item.parent[i];\n\t\t\t\t\tconst edgeId = `edgePre_${par.key}_edge_${item.key}`;\n\t\t\t\t\td3.selectAll(`#${edgeId} path`).attr('stroke', '#1e1653');\n\t\t\t\t\td3.selectAll(`#${edgeId} polygon`).attr('stroke', '#1e1653').attr('fill', '#1e1653');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\tfor (let i = 0; i < nodeChildrenList.length; i++) {\n\t\t\tconst item = nodeChildrenList[i];\n\t\t\tif (item) {\n\t\t\t\t// d3.selectAll(`#${item.key} polygon`).attr('stroke', '#1e1653').attr('fill', '#ffffff');\n\t\t\t\t// d3.selectAll(`#${item.key} text`).attr('fill', '#1e1653');\n\t\t\t\t// d3.selectAll(`#${item.key} #rect_${item.key}`).attr('stroke', '#1e1653');\n\t\t\t\t// const currentColorTheme = nodeTypeThemeMap[item.data_fields] || ThemeColor[0]\n\t\t\t\tconst currentColor = item.color\n\t\t\t\td3.selectAll(`#${item.key} .rectBg`).attr('fill', currentColor);\n\t\t\t\td3.selectAll(`#${item.key} .nodeType`).attr('fill', currentColor);\n\t\t\t\td3.selectAll(`#${item.key} .nodeContent`).attr('fill', '#000');\n\t\t\t}\n\n\t\t\tif (item && item.children && item.children.length) {\n\t\t\t\tfor (let i = 0; i < item.children.length; i++) {\n\t\t\t\t\tconst child = item.children[i];\n\t\t\t\t\tconst edgeId = `edgePre_${item.key}_edge_${child.key}`;\n\t\t\t\t\td3.selectAll(`#${edgeId} path`).attr('stroke', '#1e1653')\n\t\t\t\t\td3.selectAll(`#${edgeId} polygon`).attr('stroke', '#1e1653').attr('fill', '#1e1653');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic refresh() {\n\t\tconsole.log('refresh');\n\t\t// todo 图的改造\n\n\t\t// const nodeParentList = this.tree2List([this.rootNode], 'parent')\n\t\t// const nodeChildrenList = this.tree2List([this.rootNode], 'children')\n\t\tconst nodeList = this.dataNodes\n\n\t\tfor (let i = 0; i < nodeList.length; i++) {\n\t\t\tconst item = nodeList[i];\n\t\t\tif (item?.data_fields === 'COLLECT') {\n\t\t\t\td3.selectAll(`#${item.key} polygon`).attr('stroke', '#000000')\n\t\t\t\td3.select(`#${item.key} text`).attr('fill', '#000000');\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\t// 高亮节点\n\t\t\tif (item) {\n\t\t\t\t// const currentColorTheme = nodeTypeThemeMap[item.data_fields] || ThemeColor[0]\n\t\t\t\tconst currentColor = item.color\n\t\t\t\td3.selectAll(`#${item.key} .rectBg`).attr('fill', currentColor);\n\t\t\t\td3.selectAll(`#${item.key} .nodeType`).attr('fill', currentColor);\n\t\t\t\td3.selectAll(`#${item.key} .nodeContent`).attr('fill', '#000');\n\t\t\t}\n\n\n\t\t\t// 高亮边\n\t\t\tif (item && item.parent && item.parent.length) {\n\t\t\t\tfor (let i = 0; i < item.parent.length; i++) {\n\t\t\t\t\tconst par = item.parent[i];\n\t\t\t\t\tconst edgeId = `edgePre_${par.key}_edge_${item.key}`;\n\t\t\t\t\td3.selectAll(`#${edgeId} path`).attr('stroke', '#cdcdcd');\n\t\t\t\t\td3.selectAll(`#${edgeId} polygon`).attr('stroke', '#cdcdcd').attr('fill', '#cdcdcd');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0; i < nodeList.length; i++) {\n\t\t\tconst item = nodeList[i];\n\t\t\tif (item?.data_fields === 'COLLECT') {\n\t\t\t\td3.selectAll(`#${item.key} polygon`).attr('stroke', '#000000')\n\t\t\t\td3.select(`#${item.key} text`).attr('fill', '#000000');\n\t\t\t\tcontinue\n\t\t\t}\n\n\t\t\tif (item) {\n\t\t\t\t// const currentColorTheme = nodeTypeThemeMap[item.data_fields] || ThemeColor[0]\n\t\t\t\tconst currentColor = item.color\n\t\t\t\td3.selectAll(`#${item.key} .rectBg`).attr('fill', currentColor);\n\t\t\t\td3.selectAll(`#${item.key} .nodeType`).attr('fill', currentColor);\n\t\t\t\td3.selectAll(`#${item.key} .nodeContent`).attr('fill', '#000');\n\t\t\t}\n\n\t\t\tif (item && item.children && item.children.length) {\n\t\t\t\tfor (let i = 0; i < item.children.length; i++) {\n\t\t\t\t\tconst child = item.children[i];\n\t\t\t\t\tconst edgeId = `edgePre_${item.key}_edge_${child.key}`;\n\t\t\t\t\td3.selectAll(`#${edgeId} path`).attr('stroke', '#cdcdcd')\n\t\t\t\t\td3.selectAll(`#${edgeId} polygon`).attr('stroke', '#cdcdcd').attr('fill', '#cdcdcd');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t *将某个节点移动到画布中间\n\t *\n\t * @param {(string)} id\n\t * @memberof CostMap\n\t */\n\tpublic anchorNode(id: string) {\n\t\tthis.resetNode(this.activeNodeId || '');\n\t\tconst graphvizDom: any = d3.select('#mainGroup').datum();\n\t\tconst relativeY = graphvizDom.translation.y;\n\n\t\tconst renderNode: any = this.renderNodesMap?.get(id);\n\t\tif (renderNode) {\n\t\t\t// pt转px\n\t\t\tconst x = -renderNode.x * (96 / 72) + this.innerWidth / 2 + 100;\n\t\t\t// const y = renderNode.y * (96 / 72) - relativeY;\n\t\t\tconst y = -(relativeY - -renderNode.y) * (96 / 72) + this.innerHeight / 2;\n\t\t\tthis.mainView.call(this.zoom.transform, d3.zoomIdentity.translate(x, y).scale(1));\n\t\t}\n\t\tthis.activeNode(id);\n\t}\n\n\t/**\n\t * 将整个应用居中展示\n\t *\n\t * @param {(string)} id\n\t * @memberof CostMap\n\t */\n\tpublic centerApp() {\n\t\tthis.resetNode(this.activeNodeId || '');\n\t\tconst scaleView: any = d3.select('#scaleView').node();\n\t\tconst scaleViewBox = scaleView.getBBox();\n\t\tconst currentCenterX = scaleViewBox.width / 2;\n\t\tconst viewCenterX = this.innerWidth / 2;\n\t\tconst x = viewCenterX - currentCenterX\n\n\t\tconst currentCenterY = scaleViewBox.height / 2;\n\t\tconst viewCenterY = this.innerHeight / 2;\n\t\tconst y = viewCenterY - currentCenterY - 250\n\n\t\tthis.mainView.call(this.zoom.transform, d3.zoomIdentity.translate(x, y).scale(1));\n\t}\n\n\tpublic activeNode(id: string) {\n\t\tconst renderNode = this.renderNodesMap?.get(id);\n\t\tconst dataNode = this.dataMap?.get(id);\n\t\tif (this.activeNodeId) {\n\t\t\td3.selectAll(`#${this.activeNodeId} .nodeContent`).attr('fill', '#000');\n\t\t}\n\t\tif (renderNode && dataNode) {\n\t\t\tthis.activeNodeId = id;\n\t\t\t// d3.selectAll(`#${id} .nodeContent`).attr('fill', ThemeColor[dataNode.level % 5].activeColor || '');\n\n\t\t\t// console.log(d3.selectAll(`#${renderNode.renderId} text[fill=\"#000000\"]`));\n\t\t\t// d3.selectAll(`#${renderNode.renderId} text`).attr('fill', ThemeColor[dataNode.level % 5].activeColor || '');\n\t\t\t// d3.selectAll(`#${renderNode.renderId} path`)\n\t\t\t// \t// .attr('fill', ThemeColor[dataNode.level].activeColor || '')\n\t\t\t// \t.attr('stroke', ThemeColor[dataNode.level].activeColor || '');\n\t\t\t// d3.selectAll(`#${renderNode.renderId} polyline`).attr(\n\t\t\t// \t'stroke',\n\t\t\t// \tThemeColor[dataNode.level].activeColor || '',\n\t\t\t// );\n\t\t}\n\t}\n\n\tpublic resetNode(id: string) {\n\t\tconst renderNode = this.renderNodesMap?.get(id);\n\t\tconst dataNode = this.dataMap?.get(id);\n\t\tif (renderNode && dataNode) {\n\t\t\td3.selectAll(`[node_id=value${renderNode.renderId}]`).attr('fill', '#000000');\n\t\t\t// d3.selectAll(`#${renderNode.renderId} text`).attr('fill', ThemeColor[dataNode.level % 5].color);\n\t\t\t// d3.selectAll(`#${renderNode.renderId} path`)\n\t\t\t// \t// .attr('fill', ThemeColor[dataNode.level % 5].background)\n\t\t\t// \t.attr('stroke', ThemeColor[dataNode.level % 5].border);\n\t\t\t// d3.selectAll(`#${renderNode.renderId} polyline`).attr('stroke', ThemeColor[dataNode.level % 5].border);\n\t\t}\n\t}\n}\n","import { Drawer, Spin, } from 'antd';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { getNodeInfoCommon, getNodeRelationCommon } from '../../api/commonPipeline';\nimport Loading from '../../components/Loading/Loading';\nimport { getParam } from '../../util';\nimport NodeDetail from './NodeDetail';\nimport RelationDiagram from './TreePlusDiagram';\nimport { ILayoutConfig, INodeDetailItem, INodeItem } from './TreePlusInterface';\nimport './TreePlus.less';\nimport { useTranslation } from 'react-i18next';\n\ninterface IProps {\n\tid?: string | number | undefined | null;\n\tisCollapsed?: boolean;\n}\n\nexport default function TreePlus(props: IProps) {\n\tconst [loading, setLoading] = useState(false);\n\tconst [visableDrawer, setVisableDrawer] = useState(false)\n\tconst [isNoData, setIsNoData] = useState(false)\n\tconst [nodeDetail, setNodeDetail] = useState<INodeDetailItem[]>([])\n\tconst [loadingDetail, setLoadingDetail] = useState(false)\n\tconst [layoutConfig, setLayoutConfig] = useState<ILayoutConfig>()\n\tconst { t, i18n } = useTranslation();\n\n\tconst treeDataRef = useRef<INodeItem[]>()\n\n\tconst [relationDiagram, _setRelationDiagram] = useState<RelationDiagram>();\n\tconst relationDiagramRef = useRef(relationDiagram);\n\tconst setRelationDiagram = (data: RelationDiagram): void => {\n\t\trelationDiagramRef.current = data;\n\t\t_setRelationDiagram(data);\n\t};\n\n\tuseEffect(() => {\n\t\tconst target = new RelationDiagram({\n\t\t\tcontainerId: 'd3Container',\n\t\t\tmainViewId: 'd3MainView',\n\t\t\tmargin: 16,\n\t\t});\n\t\tsetRelationDiagram(target);\n\n\t\tconst resizeIframe = document.getElementById('resizeIframe') as HTMLIFrameElement;\n\t\tif (resizeIframe.contentWindow) {\n\t\t\tresizeIframe.contentWindow.onresize = () => {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tconsole.log(relationDiagramRef.current);\n\t\t\t\t\trelationDiagramRef.current?.reSize();\n\t\t\t\t}, 1000);\n\t\t\t};\n\t\t}\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (relationDiagram) {\n\t\t\tconst backurl = getParam('backurl') || ''\n\t\t\tfetchBloodRelationData(backurl)\n\t\t}\n\n\t}, [relationDiagram]);\n\n\tconst handleClickNode = (node: any) => {\n\t\tconsole.log(node)\n\t\tconst currentNode = relationDiagram && relationDiagram.dataMap && relationDiagram.dataMap.get(node.key)\n\t\tconsole.log('currentNode', currentNode);\n\n\t\tsetNodeDetail([])\n\t\tsetLoadingDetail(true)\n\t\tsetVisableDrawer(true)\n\t\tgetNodeInfoCommon(currentNode?.detail_url || '').then(res => {\n\t\t\tconsole.log(res.data.result.detail);\n\t\t\tconst detail = res.data.result.detail\n\t\t\tsetNodeDetail(detail)\n\t\t\tsetLoadingDetail(false)\n\t\t}).catch(() => {\n\t\t\tsetLoadingDetail(false)\n\t\t})\n\t}\n\n\tconst fetchBloodRelationData = (url: string) => {\n\t\tif (relationDiagram) {\n\t\t\tif (!!url) {\n\t\t\t\tsetLoading(true);\n\t\t\t\tgetNodeRelationCommon(url)\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tconst dag = res.data.result.dag || []\n\t\t\t\t\t\tconst layout = res.data.result.layout || {}\n\t\t\t\t\t\ttreeDataRef.current = dag\n\n\t\t\t\t\t\tif (!dag.length) {\n\t\t\t\t\t\t\tsetIsNoData(true)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsetIsNoData(false)\n\t\t\t\t\t\t}\n\t\t\t\t\t\trelationDiagram.initData(dag);\n\t\t\t\t\t\trelationDiagram.handleNodeClick = handleClickNode;\n\t\t\t\t\t\trelationDiagram.loadingStart = () => {\n\t\t\t\t\t\t\tsetLoading(true)\n\t\t\t\t\t\t}\n\t\t\t\t\t\trelationDiagram.loadingEnd = () => {\n\t\t\t\t\t\t\tsetLoading(false)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetLayoutConfig(layout)\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\tsetIsNoData(true)\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\trelationDiagram.initData([])\n\t\t\t\tsetIsNoData(true)\n\t\t\t}\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"p-r h100\" id=\"fullContainer\">\n\t\t\t<iframe\n\t\t\t\tid=\"resizeIframe\"\n\t\t\t\tsrc=\"\"\n\t\t\t\tframeBorder=\"0\"\n\t\t\t\tclassName=\"p-a z-1\"\n\t\t\t\tstyle={{ width: '100%', height: '100%' }}\n\t\t\t/>\n\t\t\t{\n\t\t\t\tloading ? <div className=\"p-a w100 h100 d-f ac jc mark z999 fadein\">\n\t\t\t\t\t<Spin spinning={loading} indicator={<Loading />}>\n\t\t\t\t\t\t<div />\n\t\t\t\t\t</Spin>\n\t\t\t\t</div> : null\n\t\t\t}\n\t\t\t<Drawer\n\t\t\t\ttitle=\"节点详情\"\n\t\t\t\twidth={800}\n\t\t\t\tclosable={false}\n\t\t\t\tonClose={() => { setVisableDrawer(false) }}\n\t\t\t\tvisible={visableDrawer}\n\t\t\t\tclassName=\"nodedetail-wapper\"\n\t\t\t>\n\t\t\t\t<Spin spinning={loadingDetail}>\n\t\t\t\t\t<NodeDetail data={nodeDetail} />\n\t\t\t\t</Spin>\n\t\t\t</Drawer>\n\n\t\t\t{\n\t\t\t\tisNoData ? <div className=\"p-a w100 h100 d-f ac jc ta-c z1\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div><img className=\"w320\" src={require('../../images/workData.png')} alt=\"\" /></div>\n\t\t\t\t\t\t<div className=\"fs22\">{t('暂无数据')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div> : null\n\t\t\t}\n\t\t\t<div className=\"d-f fd-c h100 ov-h\">\n\t\t\t\t<div className=\"tree-header\">\n\t\t\t\t\t<div className=\"p16 d-f jc-b ac\">\n\t\t\t\t\t\t<div className=\"d-f ac\">\n\t\t\t\t\t\t\t<span className=\"icon-custom\" dangerouslySetInnerHTML={{ __html: layoutConfig?.icon || '' }}></span>\n\t\t\t\t\t\t\t<span className=\"ml8 fs18\">{layoutConfig?.title}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlayoutConfig?.right_button.map(button => {\n\t\t\t\t\t\t\t\t\treturn <div onClick={() => {\n\t\t\t\t\t\t\t\t\t\twindow.open(button.url, \"blank\")\n\t\t\t\t\t\t\t\t\t}} className=\"c-text-w ml8 btn-ghost d-il\">{button.label}</div>\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"header-detail p16 d-f\">\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t(layoutConfig?.detail || []).map(detail => {\n\t\t\t\t\t\t\t\treturn <div className=\"flex1 mr48 header-detail-item\">\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tdetail.map(group => {\n\t\t\t\t\t\t\t\t\t\t\treturn <div className=\"pb2\">{group.label}：{group.value}</div>\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"d3Container\" className=\"flex1\">\n\t\t\t\t\t<svg id=\"d3MainView\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","import React from 'react'\nimport TreePlus from './TreePlus'\n\nexport default function CommonPipeline() {\n    return (\n        <>\n            <TreePlus />\n        </>\n    )\n}\n","import CommonPipeline from './CommonPipeline'\n\nexport default function DWStandard() {\n    return (\n        <div className=\"fade-in h100 d-f fd-c\">\n            <CommonPipeline />\n        </div>\n    )\n}\n","import { Button, Col, message, Row, Tabs } from 'antd'\nimport React, { useEffect, useRef, useState } from 'react'\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { CopyOutlined } from '@ant-design/icons';\nimport TableBox from '../../components/TableBox/TableBox';\nimport { INodeDetailItem, TGroupContentType } from './TreePlusInterface';\nimport EchartCore from '../../components/EchartCore/EchartCore';\nimport { getNodeInfoApi } from '../../api/commonPipeline';\nimport './NodeDetail.less';\nimport { group } from 'd3';\n\ninterface IProps {\n    data: INodeDetailItem[]\n}\n\nexport type ITNodeDetail = 'common' | 'table' | 'sql'\n\nexport default function NodeDetail(props: IProps) {\n    const [isSqlVisable, setIsSqlVisable] = useState(false)\n    const [currentDataItem, setCurrentDataItem] = useState<INodeDetailItem>()\n\n    const [nodeInfoApiMap, _setNodeInfoApiMap] = useState<Record<string, any>>({})\n    const nodeInfoApiMapRef = useRef(nodeInfoApiMap);\n    const setNodeInfoApiMap = (data: Record<string, any>): void => {\n        nodeInfoApiMapRef.current = data;\n        _setNodeInfoApiMap(data);\n    };\n\n    useEffect(() => {\n        const apiList: any[] = []\n        const nameList: string[] = []\n        props.data.forEach(tab => {\n            tab.content.forEach(group => {\n                if (group.groupContent.type === 'api') {\n                    const req = getNodeInfoApi(group.groupContent.value)\n                    apiList.push(req)\n                    nameList.push(`${tab.tabName}_${group.groupName}`)\n                }\n            })\n        })\n        console.log('apiList', apiList);\n        Promise.all(apiList).then(res => {\n            const result = res.map(item => item.data.result)\n            const resMap = result.reduce((pre, next, index) => ({ ...pre, [nameList[index]]: { ...next } }), {})\n            setNodeInfoApiMap(resMap)\n        })\n    }, [props.data])\n\n    const handelNodeDetailTable = (item: any) => {\n        try {\n            JSON.parse(`${item.value || []}`)\n        } catch (error) {\n            console.log(error);\n        }\n        const dataList = JSON.parse(`${item.value || '[]'}`)\n        let columnsConfig = Object.entries(dataList[0] || {}).reduce((pre: any, [key, value]) => [...pre, { title: key, dataIndex: key, key }], [])\n\n        return <Col span={16}>\n            <TableBox\n                rowKey={(record: any) => {\n                    return JSON.stringify(record)\n                }}\n                size={'small'}\n                cancelExportData={true}\n                columns={columnsConfig}\n                pagination={false}\n                dataSource={dataList}\n            // scroll={{ x: 1500, y: scrollY }}\n            />\n        </Col>\n    }\n\n    const handleGroupContent = (type: TGroupContentType, content: any, tabName: string, groupName: string) => {\n        switch (type) {\n            case 'map':\n                return renderMapComponent(content)\n            case 'echart':\n                return renderEchart(content)\n            case 'text':\n                return renderMapText(content)\n            case 'iframe':\n                return renderMapIframe(content)\n            case 'html':\n                return renderHtml(content)\n            case 'api':\n                return renderApi(content, tabName, groupName)\n            default:\n                return <span style={{ wordBreak: 'break-word', whiteSpace: 'pre-wrap' }}>{content}</span>\n        }\n    }\n\n    const renderApi = (data: string, tabName: string, groupName: string) => {\n        const apiKey = `${tabName}_${groupName}`;\n\n        // getNodeInfoApi(data).then(res => {\n        //     console.log(res.data.result);\n        //     const result = res.data.result\n\n        // }).catch(err => { })\n        return <div>{nodeInfoApiMapRef.current[apiKey] ? nodeInfoApiMapRef.current[apiKey].value : ''}</div>\n    }\n    const renderHtml = (data: string) => {\n        return <div dangerouslySetInnerHTML={{ __html: data }}></div>\n    }\n    const renderMapComponent = (data: Record<string, string>) => {\n        const dataList: Array<{ label: string, value: string }> = Object.entries(data).reduce((pre: any, [key, val]) => ([...pre, { label: key, value: val }]), [])\n        return <div className=\"bg-title p16\">\n            {\n                dataList.map((item, index) => {\n                    return <Row className=\"mb8 w100\" key={`nodeDetailItem_${index}`}>\n                        <Col span={8}><div className=\"ta-l\"><strong>{item.label}：</strong></div></Col>\n                        <Col span={16}><span style={{ wordBreak: 'break-word', whiteSpace: 'pre-wrap' }}>{item.value}</span></Col>\n                    </Row>\n                })\n            }\n        </div>\n    }\n    const renderEchart = (data: any) => {\n        var currentOps: any = {}\n        eval(`currentOps=${data}`)\n        return <div className=\"bg-title p16\">\n            <EchartCore option={currentOps} loading={false} />\n        </div>\n    }\n    const renderMapText = (data: string) => {\n        return <div className=\"p16 bg-title\" style={{ wordBreak: 'break-word', whiteSpace: 'pre-wrap' }}>{data}</div>\n    }\n    const renderMapIframe = (data: any) => {\n        return <iframe\n            src={data.url}\n            allowFullScreen\n            allow=\"microphone;camera;midi;encrypted-media;\"\n            className=\"w100 fade-in\"\n            style={{ border: 0, height: 500 }}>\n        </iframe>\n    }\n\n    return (\n        <>\n            <Tabs className=\"nodedetail-tab\">\n                {\n                    props.data.map((tab, tabIndex) => {\n                        return <Tabs.TabPane tab={tab.tabName} key={`nodeDetailTab${tabIndex}`}>\n                            <div className=\"d-f fd-c jc-b h100\">\n                                <div className=\"flex1\">\n                                    {\n                                        tab.content.map((group, groupIndex) => {\n                                            return <div className=\"mb32\" key={`nodeGroup${groupIndex}`}>\n                                                <div className=\"fs16 mb16 bor-l b-theme pl4\" style={{ borderLeftWidth: 2 }} dangerouslySetInnerHTML={{ __html: group.groupName }}></div>\n                                                <div>\n                                                    {handleGroupContent(group.groupContent.type, group.groupContent.value, tab.tabName, group.groupName)}\n                                                </div>\n                                            </div>\n                                        })\n                                    }\n                                </div>\n                                <div className=\"nodedetail-tool\">\n                                    {\n                                        tab.bottomButton.map(button => {\n                                            return <Button className=\"mr12 icon-tool-wrapper\" onClick={() => {\n                                                window.open(button.url, 'blank')\n                                            }}>\n                                                <span className=\"icon-tool\" dangerouslySetInnerHTML={{ __html: button.icon }}></span>\n                                                <span className=\"ml6\">{button.text}</span>\n                                            </Button>\n                                        })\n                                    }\n                                </div>\n                            </div>\n                        </Tabs.TabPane>\n                    })\n                }\n            </Tabs>\n        </>\n    )\n}\n"],"names":["getNodeRelationCommon","url","axios","getNodeInfoCommon","getNodeInfoApi","defaultChartStyle","height","EchartCore","props","_useState","useState","_useState2","_slicedToArray","chartInstance","setChartInstance","id","Math","random","toString","substring","_useTranslation","useTranslation","t","option","i18n","useEffect","chartDom","document","getElementById","chart","echarts","setOption","_objectSpread","data","_jsx","Spin","spinning","loading","children","_jsxs","className","style","isNoData","CopyToClipboard","require","ResizableTitle","_ref","onResize","width","restProps","_objectWithoutProperties","_excluded","Resizable","handle","onClick","e","stopPropagation","draggableOpts","enableUserSelectHack","userSelect","exportDataVisible","setExportDataVisible","_useState3","header","_useState4","dataFormat","setDataFormat","_useState5","_useState6","filterValue","setFilterValue","_useState7","columns","_useState8","cols","setCols","handleResize","index","_","_ref2","size","temp","_toConsumableArray","tableWidth","reduce","pre","next","localStorage","setItem","tableKey","JSON","stringify","setCurrentTableScroll","currentTableScroll","x","customColumns","map","col","onHeaderCell","column","_useState9","scroll","_useState10","dataSource","filter","item","indexOf","dataIndex","handdleFilterHeader","dataColumns","arguments","length","undefined","sheetHeader","title","tarData","forEach","dataRow","row","colName","res","push","handleExportJira","str","join","rowKey","Object","values","handleExportText","Space","direction","Modal","maskClosable","centered","bodyStyle","maxHeight","overflow","visible","onCancel","footer","position","Checkbox","options","label","value","defaultValue","onChange","right","bottom","Button","type","Tabs","tab","text","onCopy","message","cursor","minHeight","titleNode","buttonNode","cancelExportData","Row","justify","align","Col","marginLeft","ConfigProvider","renderEmpty","flexDirection","src","emptyImg","alt","Table","components","cell","pagination","rowSelection","Loading","left","d3Tip","d3TipF","D3Tool","_this","containerId","mainViewId","_ref$margin","margin","_classCallCheck","container","scaleView","mainView","gNode","gLink","gText","gBorder","gTextCache","innerWidth","innerHeight","tip","fontSize","zoom","currentNode","list2Tree","root","withoutChildrenDataList","dataMap","list2Map","i","parentId","parent","get","ci_id","tree2List","key","quene","shift","apply","list","isReplace","Map","set","treeCutNode","matchKey","treeCutAfter","dfs","tarItem","parse2Rectangle","coordList","split","coord","_coord$split","_coord$split2","y","rectSourceObj","currentIndex","tar","concat","x1","x0","y3","y0","abs","center","_selfThis","this","d3","append","attr","marginObj","top","scrollWidth","scrollHeight","html","d","call","scaleExtent","on","transform","hide","scale","_createClass","console","log","textStr","_textDom$node","textDom","textBox","node","getBBox","rect","remove","ThemeColor","graphviz","background","color","border","activeColor","disabled","disabledColor","nodeTypeThemeMap","_defineProperty","RelationDiagram","_D3Tool","_inherits","_super","_createSuper","isCollection","dataMapByName","renderNodesMap","nodesInGraphMap","nodesInCollectionMap","dataNodes","activeNodeId","rootNode","handleNodeClick","loadingStart","loadingEnd","htmlStrEnCode","replace","charCodeAt","sourceId","replaceAll","nodes","_this2","relativeKey","nodesMapByKey","nodesMapById","rootIds","childrenKey","parentKey","level","upItem","idPath","_objectSpread3","_node$childrenKey","nid","nodeCacheById","nodeCache","tarNode","flag","includes","pop","currentItemList","itemId","rootId","_this3","preHandlePreData","preHandleNodes","preHandleNextData","preHandleData","preRenderData","preRenderDataReady","renderNode","then","centerApp","preData","nextData","targetData","targetDataMap","targetDataMapByName","isDisable","_this4","data_fields","collectNum","_this5","child","_this6","each","_this6$dataMap","nodeData","currentColorTheme","box","datum","renderInfo","renderId","theme","error","beautifulNode","timeout","clearTimeout","setTimeout","d3MainView","onclick","isNode","path","elem","refresh","_this7","boxs","_this7$dataMap","bbox","pid","_selfThis$renderNodes","dataNode","highlightRelation","cy","icon","name","status","nodeKey","_this$dataMap","_this$dataMap2","currentNodeInGraph","tarParent","_ref4","tarChildren","parentNode","childrenNode","collection","collectionChildren","collectionTypeNode","targetNode","delete","nodesQuene","nodeItem","collectionNodes","collectionParent","_this8","nodesRender","createRenderNodes","nodesRenderRelation","cerateRenderNodesRelation","dotSrc","zoomTranslateExtent","dot","Promise","resolve","reject","renderDot","backRenderHandle","_this$rootNode","_this$rootNode2","cutTreeNodeParent","cutTreeNodeChildren","nodeParentList","nodeChildrenList","currentColor","par","edgeId","nodeList","_this$renderNodesMap","resetNode","relativeY","translation","activeNode","scaleViewBox","currentCenterX","currentCenterY","_this$renderNodesMap2","_this$dataMap3","_this$renderNodesMap3","_this$dataMap4","TreePlus","setLoading","visableDrawer","setVisableDrawer","setIsNoData","nodeDetail","setNodeDetail","loadingDetail","setLoadingDetail","_useState11","_useState12","layoutConfig","setLayoutConfig","treeDataRef","useRef","_useState13","_useState14","relationDiagram","_setRelationDiagram","relationDiagramRef","target","current","resizeIframe","contentWindow","onresize","_relationDiagramRef$c","reSize","backurl","getParam","fetchBloodRelationData","handleClickNode","detail_url","result","detail","catch","dag","layout","initData","err","finally","frameBorder","indicator","Drawer","closable","onClose","NodeDetail","dangerouslySetInnerHTML","__html","right_button","button","window","open","group","CommonPipeline","_Fragment","DWStandard","isSqlVisable","setIsSqlVisable","currentDataItem","setCurrentDataItem","nodeInfoApiMap","_setNodeInfoApiMap","nodeInfoApiMapRef","setNodeInfoApiMap","apiList","nameList","content","groupContent","req","tabName","groupName","all","resMap","handelNodeDetailTable","parse","dataList","columnsConfig","entries","span","TableBox","record","handleGroupContent","renderMapComponent","renderEchart","renderMapText","renderMapIframe","renderHtml","renderApi","wordBreak","whiteSpace","apiKey","_ref3","val","currentOps","eval","allowFullScreen","allow","tabIndex","groupIndex","borderLeftWidth","bottomButton"],"sourceRoot":""}